% !TeX root = ../main.tex
\input{guap-setup/guap-setup.tex} 

\directlua{
    dofile("title/lua/title.lua")
}

\newcommand{\thegroup}{1445}
\newcommand{\workyear}{\the\year}

\newcommand{\underoverline}[3][5cm]{
    \begin{minipage}{#1}
        \centering \vspace{1em}
        #2 \\
        \vspace{-0.9em}
        \rule{\textwidth}{0.5pt} \\
        \vspace{-0.3em}
        \footnotesize #3
    \end{minipage}
}

% Params
% #1 - Номер кафедры
% #2 - Должность, уч степень, звание преподавателя 
% #3 - ФИО преподавателя
% #4 - Тип работы и номер (Лабораторная работа №1)
% #5 - Название работы
% #6 - название курса
% #7 - ФИО студента(ов) (через запятую)
\newcommand{\maketitleguap}{
    \begin{titlepage}
        \centerline{ГУАП}
        \vfill
        \centerline{Кафедра №\getDepartmentNum}
        \vfill
        \leftline{ОТЧЕТ}
        \leftline{ЗАЩИЩЕН С ОЦЕНКОЙ}
        \vspace{0.7em}
        \leftline{ПРЕПОДАВАТЕЛЬ}
        \vspace{1em}
        
        
        \underoverline[6cm]{\getTeacherDegree\vphantom{AА}}{должность, уч. степень, звание}
        \underoverline[4cm]{\vphantom{AА}}{подпись, дата}
        \underoverline[6cm]{\getTeacherName}{фамилия, инициалы}
        
        \vfill
        \centerline{\large \uppercase{\getWorkType}}
        \vfill
        \centerline{\large \uppercase{\getWorkName}}
        \vfill
        \centerline{по курсу:}
        \vspace{1em}
        \centerline{\large \uppercase{\getCourseName}}
        \vfill
        \vfill
        \begin{tabular}{lccc}
            \multicolumn{2}{l}{РАБОТУ \ifmany{\getWorkAuthor}{ВЫПОЛНИЛи}{ВЫПОЛНИЛ}} & & \\
            
            \ifmany{\getWorkAuthor}{СТУДЕНТы}{СТУДЕНТ} гр № &
            \underoverline[1.1cm]{\getWorkAuthorGroup\vphantom{1234}}{\phantom{1234}}
            \printSignName{\getWorkAuthor}
            % &
            % &
            % \underline{\hspace{4cm}} &
            % \underline{\hspace{1.5cm}\getWorkAuthor\hspace{1.5cm}} \\
            
            &
            &
            {\footnotesize подпись, дата} &
            {\footnotesize фамилия, инициалы}
        \end{tabular}
        
        \vfill
        \centerline{Санкт-Петербург \workyear}
    \end{titlepage}
    \addtocounter{page}{1} % increment page number
}
